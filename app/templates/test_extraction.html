{% extends 'base.html' %}
{% block title %}Test Extraction - {{ config.name }}{% endblock %}
{% block content %}
<div class="card">
    <div class="card-body">
        <h3>Test Extraction for: {{ config.name }}</h3>
        <form method="POST" enctype="multipart/form-data">
            <div class="mb-3">
                <label for="sample_file" class="form-label">Upload Sample File</label>
                <input type="file" class="form-control" id="sample_file" name="sample_file" required>
            </div>
            <button type="submit" class="btn btn-primary">Test Extraction</button>
        </form>
        {% if error %}
            <div class="alert alert-danger mt-3">{{ error }}</div>
        {% endif %}
        {% if extracted %}
            <div class="mt-4">
                <h5>Extracted Output:</h5>
                <pre>{{ extracted | tojson(indent=2) }}</pre>
            </div>
        {% endif %}
        {% if validation_result %}
            <div class="mt-3 alert {{ 'alert-success' if 'Valid!' in validation_result else 'alert-danger' }}">
                {{ validation_result }}
            </div>
        {% endif %}
    </div>
</div>
<a href="{{ url_for('config.configuration') }}" class="btn btn-secondary mt-3">Back to Configurations</a>
{% endblock %} 